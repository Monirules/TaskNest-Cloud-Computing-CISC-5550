{% extends 'base.html' %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<br><br>
<h2>Hello, {{ current_user.username }}!</h2><br><hr>
<div class="mb-4">
  <blockquote class="blockquote">
    
    <p>Quote: <i>"{{ quote.content }}"</i></p>
    <footer class="blockquote-footer">{{ quote.author }}</footer>
  </blockquote><hr>
</div>
<br>
<form id="add-task-form" class="row g-3 mb-4" method="POST" action="/api/tasks">
  <div class="col-md-6"><input type="text" class="form-control" name="what_to_do" placeholder="New task..." required></div>
  <div class="col-md-3"><input type="date" class="form-control" name="due_date" required></div>
  <div class="col-md-3"><button class="btn btn-success w-100">Add Task</button></div>
</form>
<table class="table table-striped">
  <thead><tr><th>Task</th><th>Due</th><th>Status</th><th>Actions</th></tr></thead>
  <tbody>
    {% for t in tasks %}
    <tr class="{% if t.status=='done' %}table-success{% endif %}">
      <td>{{ t.what_to_do }}</td>
      <td>{{ t.due_date.strftime('%Y-%m-%d') }}</td>
      <td>{{ t.status }}</td>
      <td>
        <button onclick="updateTask({{ t.id }}, 'done')" class="btn btn-sm btn-outline-primary">Done</button>
        <button onclick="deleteTask({{ t.id }})" class="btn btn-sm btn-outline-danger">Delete</button>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}